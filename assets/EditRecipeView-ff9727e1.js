import{d as q,u as A,a as D,b as z,c as G,r as L,e as k,f as H,g as J,o as K,h as r,i as c,j as e,w as O,k as m,v as p,t as d,l as u,F as $,m as x,n as i,p as R,q as Q,s as W,x as _,_ as X}from"./index-8d3641b7.js";const n=g=>(Q("data-v-938a716d"),g=g(),W(),g),Y={class:"body"},Z={key:0,class:"centered"},ee=n(()=>e("h1",null,"Nueva receta",-1)),se=[ee],te={key:1,class:"centered"},oe=n(()=>e("h1",null,"Editar receta",-1)),re=[oe],ie={class:"centered"},ne={class:"photo"},le=["src"],ce={class:"card-body"},ae=["onSubmit"],de={class:"row mb-3"},me=n(()=>e("label",{for:"name",class:"col-sm-4 col-form-label col-form-label-sm"}," Nombre ",-1)),pe={class:"col-sm-8"},ue={key:0,class:"error"},_e={class:"row mb-3"},be=n(()=>e("label",{for:"img",class:"col-sm-4 col-form-label col-form-label-sm"}," Foto (url) ",-1)),ve={class:"col-sm-8"},ge={key:0,class:"error"},he={class:"row mb-3"},fe=n(()=>e("label",{for:"time",class:"col-sm-4 col-form-label col-form-label-sm"}," Tiempo (minutos) ",-1)),ye={class:"col-sm-8"},we={key:0,class:"error"},ke={class:"row mb-3"},$e=n(()=>e("label",{for:"servings",class:"col-sm-4 col-form-label col-form-label-sm"}," Porciones ",-1)),xe={class:"col-sm-8"},Re={key:0,class:"error"},Se={class:"row mb-3"},Ve=n(()=>e("label",{for:"price",class:"col-sm-4 col-form-label col-form-label-sm"}," Precio ",-1)),Ce={class:"col-sm-8"},Ie={key:0,class:"error"},Ue={class:"row mb-3"},Te=n(()=>e("label",{for:"ingredients",class:"col-sm-4 col-form-label col-form-label-sm"}," Ingredientes ",-1)),Be={class:"col-sm-8"},Ee=["onClick"],Fe=n(()=>e("i",{class:"bi bi-trash"},null,-1)),Ne=[Fe],je={class:"row mb-3"},Me={class:"col-sm-10"},Pe={key:0,class:"error"},qe=n(()=>e("i",{class:"bi bi-plus"},null,-1)),Ae=[qe],De=n(()=>e("div",{class:"row mb-3"},[e("label",{for:"steps",class:"form-label col-form-label-sm"},"Pasos a seguir")],-1)),ze={key:0,class:"row mb-3"},Ge=["onClick"],Le=n(()=>e("i",{class:"bi bi-trash"},null,-1)),He=[Le],Je={class:"row mb-3"},Ke={class:"col-sm-10"},Oe={key:0,class:"error"},Qe=n(()=>e("i",{class:"bi bi-plus"},null,-1)),We=[Qe],Xe={class:"row mb-3"},Ye=n(()=>e("label",{for:"tags",class:"col-sm-4 col-form-label col-form-label-sm"}," Tags ",-1)),Ze={class:"col-sm-8"},es=["onClick"],ss={class:"row mb-3"},ts={class:"col-sm-10"},os=n(()=>e("i",{class:"bi bi-plus"},null,-1)),rs=[os],is=n(()=>e("div",{class:"centered"},[e("button",{type:"submit",class:"btn btn-primary"},"Guardar receta!")],-1)),ns=q({__name:"EditRecipeView",setup(g){const C=A(),S=D(),w=C.params.id.toString(),b=z(),I=G(),t=L({recipe:{id:"",name:"",img:"https://img.freepik.com/vector-gratis/ilustracion-icono-dibujos-animados-pastel-taza-concepto-icono-pasteleria-alimentos-aislado-estilo-dibujos-animados-plana_138676-2571.jpg?w=2000",ingredients:[],steps:[],price:0,time:0,servings:0,tags:[],user:I.getUser.id}}),h=k(""),f=k(""),y=k(""),U=H(()=>({name:{required:_},img:{required:_},ingredients:{required:_},steps:{required:_},price:{required:_},time:{required:_},servings:{required:_}})),l=J(U,t.recipe),T=()=>{const a=b.getRecipeById(w);a&&(t.recipe=a)},B=a=>{const o=t.recipe.ingredients.filter(s=>s!==a);t.recipe.ingredients=o},E=()=>{t.recipe.ingredients.push(h.value),h.value=""},F=a=>{const o=t.recipe.steps.filter(s=>s!==a);t.recipe.steps=o},N=()=>{t.recipe.steps.push(f.value),f.value=""},j=()=>{t.recipe.tags.push(y.value),y.value=""},M=a=>{const o=t.recipe.tags.filter(s=>s!==a);t.recipe.tags=o},P=async()=>{await l.value.$validate()&&(w==="new"?b.createRecipe(t.recipe).then(()=>{alert("Receta creada con exito"),b.getRecipesFromApi(),S.push({name:"user"})}).catch(o=>{alert("error al crear receta"),console.log("err: ",o)}):b.updateRecipe(t.recipe).then(()=>{alert("Receta editada con exito"),b.getRecipesFromApi(),S.push({name:"user"})}).catch(o=>{alert("error al editar receta"),console.log("err: ",o)}))};return K(()=>{T()}),(a,o)=>(i(),r("div",Y,[c(w)==="new"?(i(),r("div",Z,se)):(i(),r("div",te,re)),e("div",ie,[e("div",ne,[e("img",{src:t.recipe.img,class:"img-fluid rounded-start",alt:"..."},null,8,le)])]),e("div",null,[e("div",ce,[e("form",{onSubmit:O(P,["prevent"])},[e("div",de,[me,e("div",pe,[m(e("input",{type:"text",class:"form-control form-control-sm",id:"name","onUpdate:modelValue":o[0]||(o[0]=s=>t.recipe.name=s),name:"name"},null,512),[[p,t.recipe.name]]),c(l).name.$error?(i(),r("span",ue,d(c(l).name.$errors[0].$message),1)):u("",!0)])]),e("div",_e,[be,e("div",ve,[m(e("input",{type:"text",class:"form-control form-control-sm",id:"img","onUpdate:modelValue":o[1]||(o[1]=s=>t.recipe.img=s),name:"img"},null,512),[[p,t.recipe.img]]),c(l).img.$error?(i(),r("span",ge,d(c(l).img.$errors[0].$message),1)):u("",!0)])]),e("div",he,[fe,e("div",ye,[m(e("input",{type:"number",class:"form-control form-control-sm",id:"time","onUpdate:modelValue":o[2]||(o[2]=s=>t.recipe.time=s),name:"time"},null,512),[[p,t.recipe.time,void 0,{number:!0}]]),c(l).time.$error?(i(),r("span",we,d(c(l).time.$errors[0].$message),1)):u("",!0)])]),e("div",ke,[$e,e("div",xe,[m(e("input",{type:"number",class:"form-control form-control-sm",id:"servings","onUpdate:modelValue":o[3]||(o[3]=s=>t.recipe.servings=s),name:"servings"},null,512),[[p,t.recipe.servings,void 0,{number:!0}]]),c(l).servings.$error?(i(),r("span",Re,d(c(l).servings.$errors[0].$message),1)):u("",!0)])]),e("div",Se,[Ve,e("div",Ce,[m(e("input",{type:"number",class:"form-control form-control-sm",id:"price","onUpdate:modelValue":o[4]||(o[4]=s=>t.recipe.price=s),name:"price"},null,512),[[p,t.recipe.price,void 0,{number:!0}]]),c(l).price.$error?(i(),r("span",Ie,d(c(l).price.$errors[0].$message),1)):u("",!0)])]),e("div",Ue,[Te,e("div",Be,[e("ul",null,[(i(!0),r($,null,x(t.recipe.ingredients,(s,v)=>(i(),r("li",{key:v},[R(d(s)+" ",1),e("button",{type:"button",class:"btn btn-primary btn-action",onClick:V=>B(s)},Ne,8,Ee)]))),128))])])]),e("div",je,[e("div",Me,[m(e("input",{type:"text",class:"form-control form-control-sm",id:"servings","onUpdate:modelValue":o[5]||(o[5]=s=>h.value=s),name:"servings"},null,512),[[p,h.value]]),c(l).ingredients.$error?(i(),r("span",Pe,d(c(l).ingredients.$errors[0].$message),1)):u("",!0)]),e("div",{class:"col-sm-2"},[e("button",{type:"button",class:"btn btn-primary btn-action",onClick:E},Ae)])]),De,t.recipe.steps.length>0?(i(),r("div",ze,[e("ol",null,[(i(!0),r($,null,x(t.recipe.steps,(s,v)=>(i(),r("li",{key:v},[R(d(s)+" ",1),e("button",{type:"button",class:"btn btn-primary btn-action",onClick:V=>F(s)},He,8,Ge)]))),128))])])):u("",!0),e("div",Je,[e("div",Ke,[m(e("input",{type:"text",class:"form-control form-control-sm",id:"newStep","onUpdate:modelValue":o[6]||(o[6]=s=>f.value=s),name:"newStep"},null,512),[[p,f.value]]),c(l).steps.$error?(i(),r("span",Oe,d(c(l).steps.$errors[0].$message),1)):u("",!0)]),e("div",{class:"col-sm-2"},[e("button",{type:"button",class:"btn btn-primary btn-action",onClick:N},We)])]),e("div",Xe,[Ye,e("div",Ze,[e("div",null,[(i(!0),r($,null,x(t.recipe.tags,(s,v)=>(i(),r("span",{key:v,class:"badge rounded-pill bg-primary tag"},[R(d(s)+" ",1),e("button",{type:"button",class:"btn btn-tag",onClick:V=>M(s)},"x",8,es)]))),128))])])]),e("div",ss,[e("div",ts,[m(e("input",{type:"text",class:"form-control form-control-sm",id:"newTag","onUpdate:modelValue":o[7]||(o[7]=s=>y.value=s),name:"newTag"},null,512),[[p,y.value]])]),e("div",{class:"col-sm-2"},[e("button",{type:"button",class:"btn btn-primary btn-action",onClick:j},rs)])]),is],40,ae)])])]))}});const cs=X(ns,[["__scopeId","data-v-938a716d"]]);export{cs as default};
