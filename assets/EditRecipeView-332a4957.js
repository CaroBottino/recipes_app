import{d as E,n as F,g as N,u as j,j as M,i as f,q as P,c as n,k as $,a as e,w as A,l as r,v as a,F as g,r as h,e as D,o as c,b as y,t as w,p as q,f as z,_ as G}from"./index-35593eb3.js";const i=p=>(q("data-v-a82af00b"),p=p(),z(),p),L={class:"body"},H={key:0},J=i(()=>e("h1",null,"Nueva receta",-1)),K=[J],O={key:1},Q=i(()=>e("h1",null,"Editar receta",-1)),W=[Q],X={class:"photo"},Y=["src"],Z={class:"card-body"},ee=["onSubmit"],se={class:"row mb-3"},te=i(()=>e("label",{for:"name",class:"col-sm-4 col-form-label col-form-label-sm"}," Nombre ",-1)),oe={class:"col-sm-8"},ie={class:"row mb-3"},le=i(()=>e("label",{for:"img",class:"col-sm-4 col-form-label col-form-label-sm"}," Foto (url) ",-1)),ne={class:"col-sm-8"},ce={class:"row mb-3"},re=i(()=>e("label",{for:"time",class:"col-sm-4 col-form-label col-form-label-sm"}," Tiempo (minutos) ",-1)),ae={class:"col-sm-8"},de={class:"row mb-3"},me=i(()=>e("label",{for:"servings",class:"col-sm-4 col-form-label col-form-label-sm"}," Porciones ",-1)),pe={class:"col-sm-8"},ue={class:"row mb-3"},_e=i(()=>e("label",{for:"price",class:"col-sm-4 col-form-label col-form-label-sm"}," Precio ",-1)),be={class:"col-sm-8"},ve={class:"row mb-3"},fe=i(()=>e("label",{for:"ingredients",class:"col-sm-4 col-form-label col-form-label-sm"}," Ingredientes ",-1)),ge={class:"col-sm-8"},he=["onClick"],ye=i(()=>e("i",{class:"bi bi-trash"},null,-1)),we=[ye],ke={class:"row mb-3"},xe={class:"col-sm-10"},Se=i(()=>e("i",{class:"bi bi-plus"},null,-1)),Re=[Se],Ve=i(()=>e("div",{class:"row mb-3"},[e("label",{for:"steps",class:"form-label col-form-label-sm"},"Pasos a seguir")],-1)),Ce={key:0,class:"row mb-3"},Ie=["onClick"],Ue=i(()=>e("i",{class:"bi bi-trash"},null,-1)),Te=[Ue],Be={class:"row mb-3"},Ee={class:"col-sm-10"},Fe=i(()=>e("i",{class:"bi bi-plus"},null,-1)),Ne=[Fe],je={class:"row mb-3"},Me=i(()=>e("label",{for:"tags",class:"col-sm-4 col-form-label col-form-label-sm"}," Tags ",-1)),Pe={class:"col-sm-8"},$e=["onClick"],Ae={class:"row mb-3"},De={class:"col-sm-10"},qe=i(()=>e("i",{class:"bi bi-plus"},null,-1)),ze=[qe],Ge=i(()=>e("button",{type:"submit",class:"btn btn-primary"},"Guardar receta!",-1)),Le=E({__name:"EditRecipeView",setup(p){const v=F().params.id.toString(),d=N(),x=j(),t=M({recipe:{id:"",name:"",img:"https://img.freepik.com/vector-gratis/ilustracion-icono-dibujos-animados-pastel-taza-concepto-icono-pasteleria-alimentos-aislado-estilo-dibujos-animados-plana_138676-2571.jpg?w=2000",ingredients:[],steps:[],price:0,time:0,servings:0,tags:[],user:x.getUser.id}}),u=f(""),_=f(""),b=f(""),S=()=>{const l=d.getRecipeById(v);l&&(t.recipe=l)},R=l=>{const o=t.recipe.ingredients.filter(s=>s!==l);t.recipe.ingredients=o},V=()=>{t.recipe.ingredients.push(u.value),u.value=""},C=l=>{const o=t.recipe.steps.filter(s=>s!==l);t.recipe.steps=o},I=()=>{t.recipe.steps.push(_.value),_.value=""},U=()=>{t.recipe.tags.push(b.value),b.value=""},T=l=>{const o=t.recipe.tags.filter(s=>s!==l);t.recipe.tags=o},B=()=>{v==="new"?d.createRecipe(t.recipe).then(()=>{alert("Receta creada con exito"),d.getRecipesFromApi()}).catch(l=>{alert("error al crear receta"),console.log("err: ",l)}):d.updateRecipe(t.recipe).then(()=>{alert("Receta editada con exito"),d.getRecipesFromApi()}).catch(l=>{alert("error al editar receta"),console.log("err: ",l)})};return P(()=>{S()}),(l,o)=>(c(),n("div",L,[$(v)==="new"?(c(),n("div",H,K)):(c(),n("div",O,W)),e("div",X,[e("img",{src:t.recipe.img,class:"img-fluid rounded-start",alt:"..."},null,8,Y)]),e("div",null,[e("div",Z,[e("form",{onSubmit:A(B,["prevent"])},[e("div",se,[te,e("div",oe,[r(e("input",{type:"text",class:"form-control form-control-sm",id:"name","onUpdate:modelValue":o[0]||(o[0]=s=>t.recipe.name=s),name:"name"},null,512),[[a,t.recipe.name]])])]),e("div",ie,[le,e("div",ne,[r(e("input",{type:"text",class:"form-control form-control-sm",id:"img","onUpdate:modelValue":o[1]||(o[1]=s=>t.recipe.img=s),name:"img"},null,512),[[a,t.recipe.img]])])]),e("div",ce,[re,e("div",ae,[r(e("input",{type:"number",class:"form-control form-control-sm",id:"time","onUpdate:modelValue":o[2]||(o[2]=s=>t.recipe.time=s),name:"time"},null,512),[[a,t.recipe.time,void 0,{number:!0}]])])]),e("div",de,[me,e("div",pe,[r(e("input",{type:"number",class:"form-control form-control-sm",id:"servings","onUpdate:modelValue":o[3]||(o[3]=s=>t.recipe.servings=s),name:"servings"},null,512),[[a,t.recipe.servings,void 0,{number:!0}]])])]),e("div",ue,[_e,e("div",be,[r(e("input",{type:"number",class:"form-control form-control-sm",id:"price","onUpdate:modelValue":o[4]||(o[4]=s=>t.recipe.price=s),name:"price"},null,512),[[a,t.recipe.price,void 0,{number:!0}]])])]),e("div",ve,[fe,e("div",ge,[e("ul",null,[(c(!0),n(g,null,h(t.recipe.ingredients,(s,m)=>(c(),n("li",{key:m},[y(w(s)+" ",1),e("button",{type:"button",class:"btn btn-primary",onClick:k=>R(s)},we,8,he)]))),128))])])]),e("div",ke,[e("div",xe,[r(e("input",{type:"text",class:"form-control form-control-sm",id:"servings","onUpdate:modelValue":o[5]||(o[5]=s=>u.value=s),name:"servings"},null,512),[[a,u.value]])]),e("div",{class:"col-sm-2"},[e("button",{type:"button",class:"btn btn-primary",onClick:V},Re)])]),Ve,t.recipe.steps.length>0?(c(),n("div",Ce,[e("ol",null,[(c(!0),n(g,null,h(t.recipe.steps,(s,m)=>(c(),n("li",{key:m},[y(w(s)+" ",1),e("button",{type:"button",class:"btn btn-primary",onClick:k=>C(s)},Te,8,Ie)]))),128))])])):D("",!0),e("div",Be,[e("div",Ee,[r(e("input",{type:"text",class:"form-control form-control-sm",id:"newStep","onUpdate:modelValue":o[6]||(o[6]=s=>_.value=s),name:"newStep"},null,512),[[a,_.value]])]),e("div",{class:"col-sm-2"},[e("button",{type:"button",class:"btn btn-primary",onClick:I},Ne)])]),e("div",je,[Me,e("div",Pe,[e("div",null,[(c(!0),n(g,null,h(t.recipe.tags,(s,m)=>(c(),n("span",{key:m,class:"badge rounded-pill bg-primary tag"},[y(w(s)+" ",1),e("button",{type:"button",class:"btn btn-tag",onClick:k=>T(s)},"x",8,$e)]))),128))])])]),e("div",Ae,[e("div",De,[r(e("input",{type:"text",class:"form-control form-control-sm",id:"newTag","onUpdate:modelValue":o[7]||(o[7]=s=>b.value=s),name:"newTag"},null,512),[[a,b.value]])]),e("div",{class:"col-sm-2"},[e("button",{type:"button",class:"btn btn-primary",onClick:U},ze)])]),Ge],40,ee)])])]))}});const Ke=G(Le,[["__scopeId","data-v-a82af00b"]]);export{Ke as default};
