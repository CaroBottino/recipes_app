import{d as N,u as j,a as M,b as P,c as $,r as A,e as h,o as D,f as n,g as z,h as e,w as G,i as r,v as a,F as f,j as g,k as L,l as c,m as y,t as w,p as q,n as H,_ as J}from"./index-a73f2253.js";const i=p=>(q("data-v-64c2eb0c"),p=p(),H(),p),K={class:"body"},O={key:0,class:"centered"},Q=i(()=>e("h1",null,"Nueva receta",-1)),W=[Q],X={key:1,class:"centered"},Y=i(()=>e("h1",null,"Editar receta",-1)),Z=[Y],ee={class:"centered"},se={class:"photo"},te=["src"],oe={class:"card-body"},ie=["onSubmit"],le={class:"row mb-3"},ne=i(()=>e("label",{for:"name",class:"col-sm-4 col-form-label col-form-label-sm"}," Nombre ",-1)),ce={class:"col-sm-8"},re={class:"row mb-3"},ae=i(()=>e("label",{for:"img",class:"col-sm-4 col-form-label col-form-label-sm"}," Foto (url) ",-1)),de={class:"col-sm-8"},me={class:"row mb-3"},pe=i(()=>e("label",{for:"time",class:"col-sm-4 col-form-label col-form-label-sm"}," Tiempo (minutos) ",-1)),ue={class:"col-sm-8"},_e={class:"row mb-3"},be=i(()=>e("label",{for:"servings",class:"col-sm-4 col-form-label col-form-label-sm"}," Porciones ",-1)),ve={class:"col-sm-8"},he={class:"row mb-3"},fe=i(()=>e("label",{for:"price",class:"col-sm-4 col-form-label col-form-label-sm"}," Precio ",-1)),ge={class:"col-sm-8"},ye={class:"row mb-3"},we=i(()=>e("label",{for:"ingredients",class:"col-sm-4 col-form-label col-form-label-sm"}," Ingredientes ",-1)),ke={class:"col-sm-8"},xe=["onClick"],Re=i(()=>e("i",{class:"bi bi-trash"},null,-1)),Se=[Re],Ve={class:"row mb-3"},Ce={class:"col-sm-10"},Ie=i(()=>e("i",{class:"bi bi-plus"},null,-1)),Ue=[Ie],Te=i(()=>e("div",{class:"row mb-3"},[e("label",{for:"steps",class:"form-label col-form-label-sm"},"Pasos a seguir")],-1)),Be={key:0,class:"row mb-3"},Ee=["onClick"],Fe=i(()=>e("i",{class:"bi bi-trash"},null,-1)),Ne=[Fe],je={class:"row mb-3"},Me={class:"col-sm-10"},Pe=i(()=>e("i",{class:"bi bi-plus"},null,-1)),$e=[Pe],Ae={class:"row mb-3"},De=i(()=>e("label",{for:"tags",class:"col-sm-4 col-form-label col-form-label-sm"}," Tags ",-1)),ze={class:"col-sm-8"},Ge=["onClick"],Le={class:"row mb-3"},qe={class:"col-sm-10"},He=i(()=>e("i",{class:"bi bi-plus"},null,-1)),Je=[He],Ke=i(()=>e("div",{class:"centered"},[e("button",{type:"submit",class:"btn btn-primary"},"Guardar receta!")],-1)),Oe=N({__name:"EditRecipeView",setup(p){const R=j(),k=M(),v=R.params.id.toString(),d=P(),S=$(),t=A({recipe:{id:"",name:"",img:"https://img.freepik.com/vector-gratis/ilustracion-icono-dibujos-animados-pastel-taza-concepto-icono-pasteleria-alimentos-aislado-estilo-dibujos-animados-plana_138676-2571.jpg?w=2000",ingredients:[],steps:[],price:0,time:0,servings:0,tags:[],user:S.getUser.id}}),u=h(""),_=h(""),b=h(""),V=()=>{const l=d.getRecipeById(v);l&&(t.recipe=l)},C=l=>{const o=t.recipe.ingredients.filter(s=>s!==l);t.recipe.ingredients=o},I=()=>{t.recipe.ingredients.push(u.value),u.value=""},U=l=>{const o=t.recipe.steps.filter(s=>s!==l);t.recipe.steps=o},T=()=>{t.recipe.steps.push(_.value),_.value=""},B=()=>{t.recipe.tags.push(b.value),b.value=""},E=l=>{const o=t.recipe.tags.filter(s=>s!==l);t.recipe.tags=o},F=()=>{v==="new"?d.createRecipe(t.recipe).then(()=>{alert("Receta creada con exito"),d.getRecipesFromApi(),k.push({name:"user"})}).catch(l=>{alert("error al crear receta"),console.log("err: ",l)}):d.updateRecipe(t.recipe).then(()=>{alert("Receta editada con exito"),d.getRecipesFromApi(),k.push({name:"user"})}).catch(l=>{alert("error al editar receta"),console.log("err: ",l)})};return D(()=>{V()}),(l,o)=>(c(),n("div",K,[z(v)==="new"?(c(),n("div",O,W)):(c(),n("div",X,Z)),e("div",ee,[e("div",se,[e("img",{src:t.recipe.img,class:"img-fluid rounded-start",alt:"..."},null,8,te)])]),e("div",null,[e("div",oe,[e("form",{onSubmit:G(F,["prevent"])},[e("div",le,[ne,e("div",ce,[r(e("input",{type:"text",class:"form-control form-control-sm",id:"name","onUpdate:modelValue":o[0]||(o[0]=s=>t.recipe.name=s),name:"name"},null,512),[[a,t.recipe.name]])])]),e("div",re,[ae,e("div",de,[r(e("input",{type:"text",class:"form-control form-control-sm",id:"img","onUpdate:modelValue":o[1]||(o[1]=s=>t.recipe.img=s),name:"img"},null,512),[[a,t.recipe.img]])])]),e("div",me,[pe,e("div",ue,[r(e("input",{type:"number",class:"form-control form-control-sm",id:"time","onUpdate:modelValue":o[2]||(o[2]=s=>t.recipe.time=s),name:"time"},null,512),[[a,t.recipe.time,void 0,{number:!0}]])])]),e("div",_e,[be,e("div",ve,[r(e("input",{type:"number",class:"form-control form-control-sm",id:"servings","onUpdate:modelValue":o[3]||(o[3]=s=>t.recipe.servings=s),name:"servings"},null,512),[[a,t.recipe.servings,void 0,{number:!0}]])])]),e("div",he,[fe,e("div",ge,[r(e("input",{type:"number",class:"form-control form-control-sm",id:"price","onUpdate:modelValue":o[4]||(o[4]=s=>t.recipe.price=s),name:"price"},null,512),[[a,t.recipe.price,void 0,{number:!0}]])])]),e("div",ye,[we,e("div",ke,[e("ul",null,[(c(!0),n(f,null,g(t.recipe.ingredients,(s,m)=>(c(),n("li",{key:m},[y(w(s)+" ",1),e("button",{type:"button",class:"btn btn-primary btn-action",onClick:x=>C(s)},Se,8,xe)]))),128))])])]),e("div",Ve,[e("div",Ce,[r(e("input",{type:"text",class:"form-control form-control-sm",id:"servings","onUpdate:modelValue":o[5]||(o[5]=s=>u.value=s),name:"servings"},null,512),[[a,u.value]])]),e("div",{class:"col-sm-2"},[e("button",{type:"button",class:"btn btn-primary btn-action",onClick:I},Ue)])]),Te,t.recipe.steps.length>0?(c(),n("div",Be,[e("ol",null,[(c(!0),n(f,null,g(t.recipe.steps,(s,m)=>(c(),n("li",{key:m},[y(w(s)+" ",1),e("button",{type:"button",class:"btn btn-primary btn-action",onClick:x=>U(s)},Ne,8,Ee)]))),128))])])):L("",!0),e("div",je,[e("div",Me,[r(e("input",{type:"text",class:"form-control form-control-sm",id:"newStep","onUpdate:modelValue":o[6]||(o[6]=s=>_.value=s),name:"newStep"},null,512),[[a,_.value]])]),e("div",{class:"col-sm-2"},[e("button",{type:"button",class:"btn btn-primary btn-action",onClick:T},$e)])]),e("div",Ae,[De,e("div",ze,[e("div",null,[(c(!0),n(f,null,g(t.recipe.tags,(s,m)=>(c(),n("span",{key:m,class:"badge rounded-pill bg-primary tag"},[y(w(s)+" ",1),e("button",{type:"button",class:"btn btn-tag",onClick:x=>E(s)},"x",8,Ge)]))),128))])])]),e("div",Le,[e("div",qe,[r(e("input",{type:"text",class:"form-control form-control-sm",id:"newTag","onUpdate:modelValue":o[7]||(o[7]=s=>b.value=s),name:"newTag"},null,512),[[a,b.value]])]),e("div",{class:"col-sm-2"},[e("button",{type:"button",class:"btn btn-primary btn-action",onClick:B},Je)])]),Ke],40,ie)])])]))}});const We=J(Oe,[["__scopeId","data-v-64c2eb0c"]]);export{We as default};
